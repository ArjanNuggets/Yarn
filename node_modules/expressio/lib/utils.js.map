{"version":3,"sources":["../src/utils.js"],"names":["config","name","defaults","ndtk","req","sanitize","object","schema","message","assert","isJoi","result","Joi","validate","stripUnknown","errMessage","error","details","value"],"mappings":";;;;;;AAQA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;AAbA;;;;;;;;AAiBA,MAAMA,SAAS,CAACC,IAAD,EAAOC,QAAP,KAAoBC,eAAKH,MAAL,CAAYG,eAAKC,GAAL,CAASH,IAAT,CAAZ,EAA4BE,eAAKC,GAAL,CAASF,QAAT,CAA5B,CAAnC;;AAEA;;;;AAIA,MAAMG,WAAW,CAACC,MAAD,EAASC,MAAT,EAAiBC,OAAjB,KAA6B;AAC5C;AACAL,iBAAKM,MAAL,CAAYF,UAAUA,OAAOG,KAA7B,EAAoC,2DAApC;;AAEA;AACAP,iBAAKM,MAAL,CAAY,6BAAcH,MAAd,CAAZ,EAAmC,8CAAnC;;AAEA,QAAMK,SAASC,cAAIC,QAAJ,CAAaP,MAAb,EAAqBC,MAArB,EAA6B,EAAEO,cAAc,IAAhB,EAA7B,CAAf;AACA,QAAMC,aAAa,wBAASP,OAAT,IAAoBA,OAApB,GAA8B,gBAAjD;;AAEA,MAAIG,OAAOK,KAAX,EAAkBb,eAAKM,MAAL,CAAY,KAAZ,EAAoB,GAAEM,UAAW,KAAIJ,OAAOK,KAAP,CAAaC,OAAb,CAAqB,CAArB,EAAwBT,OAAQ,EAArE;;AAElB,SAAOG,OAAOO,KAAd;AACD,CAbD;;kBAee,EAAElB,MAAF,EAAUK,QAAV,E","file":"utils.js","sourcesContent":["/**\n * Utility Functions\n *\n * @copyright Copyright (c) 2017, hugw.io\n * @author Hugo W - contact@hugw.io\n * @license MIT\n */\n\nimport ndtk from 'ndtk'\nimport isString from 'lodash/isString'\nimport isPlainObject from 'lodash/isPlainObject'\nimport Joi from 'joi'\n\n/**\n * Helper for loading\n * app and default config objects\n */\nconst config = (name, defaults) => ndtk.config(ndtk.req(name), ndtk.req(defaults))\n\n/**\n * Validate object schemas\n * using Joi validator\n */\nconst sanitize = (object, schema, message) => {\n  // Ensure schema is a valid Joi object\n  ndtk.assert(schema && schema.isJoi, 'Sanitize error: schema provided is not a valid Joi schema')\n\n  // Ensure object is valid\n  ndtk.assert(isPlainObject(object), 'Sanitize error: object provided is not valid')\n\n  const result = Joi.validate(object, schema, { stripUnknown: true })\n  const errMessage = isString(message) ? message : 'Invalid config'\n\n  if (result.error) ndtk.assert(false, `${errMessage}: ${result.error.details[0].message}`)\n\n  return result.value\n}\n\nexport default { config, sanitize }\n"]}